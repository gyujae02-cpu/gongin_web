<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Maple Guild Login</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    :root {
      --bg: #ffffff;
      --stroke: rgba(15, 23, 42, .12);
      --shadow: 0 24px 60px rgba(15, 23, 42, .14);
      --shadow-soft: 0 14px 34px rgba(15, 23, 42, .12);
      --radius: 26px;

      /* Maple-ish Blue */
      --blue1: #4da3ff;
      --blue2: #2f7de1;
      --blue3: #1f5fb8;

      --text: #0f172a;
      --muted: rgba(15, 23, 42, .60);
      --input-bg: #f9fbff;
      --input-stroke: #cfe2ff;
      --badge-bg: #edf4ff;
      --badge-text: #2f7de1;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      color: var(--text);
    }

    .page {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 16px;
    }

    .scene {
      position: relative;
      width: min(1100px, 96vw);
      height: 640px;
      border-radius: calc(var(--radius) + 10px);
      background: transparent;
    }

    .bg-card {
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 760px;
      height: 520px;
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      border: 1px solid var(--stroke);
      background: #f2f4f7;
    }

    .bg-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .bg-card::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(255, 255, 255, .12);
      pointer-events: none;
    }

    .login-panel {
      position: absolute;
      top: 50%;
      left: 520px;
      transform: translateY(-50%);
      width: 380px;
      border-radius: var(--radius);
      background: rgba(255, 255, 255, .90);
      border: 1px solid rgba(15, 23, 42, .10);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      padding: 28px;
    }

    .guild-badge {
      display: inline-block;
      padding: 6px 14px;
      border-radius: 999px;
      background: var(--badge-bg);
      color: var(--badge-text);
      font-size: 13px;
      font-weight: 700;
      margin-bottom: 14px;
      border: 1px solid rgba(47, 125, 225, .20);
    }

    .title {
      font-size: 26px;
      font-weight: 900;
      letter-spacing: -0.02em;
      margin: 0 0 6px 0;
    }

    .sub {
      margin: 0 0 18px 0;
      color: var(--muted);
      font-size: 14px;
    }

    .form-control {
      height: 48px;
      border-radius: 14px;
      border: 1px solid var(--input-stroke);
      background: var(--input-bg);
      box-shadow: 0 1px 0 rgba(15, 23, 42, .04) inset;
      padding: 12px 14px;
    }

    .form-control:focus {
      border-color: rgba(77, 163, 255, .70);
      box-shadow: 0 0 0 .25rem rgba(77, 163, 255, .22);
      background: #fff;
    }

    .btn-login {
      height: 48px;
      border-radius: 14px;
      font-weight: 800;
      border: none;
      background: linear-gradient(180deg, var(--blue1), var(--blue2));
      box-shadow: 0 8px 0 var(--blue3), 0 18px 32px rgba(47, 125, 225, .18);
      transition: transform .08s ease, box-shadow .08s ease, filter .12s ease;
    }

    .btn-login:hover {
      filter: brightness(.98);
      transform: translateY(-1px);
    }

    .btn-login:active {
      transform: translateY(2px);
      box-shadow: 0 6px 0 var(--blue3), 0 14px 28px rgba(47, 125, 225, .16);
    }

    .help-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 14px;
      font-size: 13px;
      color: rgba(15, 23, 42, .55);
    }

    .error-text {
      display: none;
      margin-top: 10px;
      font-size: 13px;
      color: #dc2626;
      font-weight: 700;
    }

    @media (max-width: 991px) {
      .scene {
        height: auto;
      }

      .bg-card {
        position: relative;
        left: 0;
        top: 0;
        transform: none;
        width: 100%;
        height: 260px;
      }

      .login-panel {
        position: relative;
        left: 0;
        top: 0;
        transform: none;
        width: min(420px, 92vw);
        margin: -24px auto 0 auto;
      }
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="scene">

      <div class="bg-card">
        <img src="assets/bg.jpg" alt="Background">
      </div>

      <div class="login-panel">
        <div class="guild-badge">üçÅ Î©îÏù¥ÌîåÌÇ§Ïö∞Í∏∞ 16ÏÑúÎ≤Ñ</div>

        <div class="title">Í≥µÏù∏ Í∏∏Îìú Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú</div>
        <p class="sub">ÌóàÍ∞ÄÎêú ÏÇ¨Ïö©ÏûêÎßå Ï†ëÍ∑ºÌï† Ïàò ÏûàÏäµÎãàÎã§.</p>

        <form id="loginForm" novalidate>
          <div class="mb-3">
            <!-- IDÎäî adminÏúºÎ°ú Í≥†Ï†ï -->
            <input id="id" class="form-control" type="text" value="admin" readonly>
          </div>

          <div class="mb-2">
            <input id="pw" class="form-control" type="password" placeholder="Password" autocomplete="current-password"
              required>
          </div>

          <div id="err" class="error-text">ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.</div>

          <button id="btn" class="btn btn-login w-100 mt-3" type="submit">Î°úÍ∑∏Ïù∏</button>

          <div class="help-row">
            <span>¬© 2025 Î©îÏù¥ÌîåÌÇ§Ïö∞Í∏∞ Í≥µÏù∏ Í∏∏Îìú</span>
          </div>
        </form>
      </div>

    </div>
  </div>

  <script>
    const AUTH_KEY = "guild_auth_v1";
    const AUTH_TTL_MS = 1000 * 60 * 60 * 12; // 12ÏãúÍ∞Ñ
    const FIXED_ID = "admin";

    const PW_HASH_HEX = "77f1694a883c6a104c93b6f8643d9e2379041b6c231e722134a6868255a19e19";

    (function autoRedirectIfAuthed() {
      try {
        const raw = localStorage.getItem(AUTH_KEY);
        if (!raw) return;
        const data = JSON.parse(raw);
        if (!data || !data.exp || Date.now() > data.exp) return;
        location.replace("members.html");
      } catch (e) { }
    })();

    async function sha256Hex(str) {
      const enc = new TextEncoder().encode(str);
      const buf = await crypto.subtle.digest("SHA-256", enc);
      const arr = Array.from(new Uint8Array(buf));
      return arr.map(b => b.toString(16).padStart(2, "0")).join("");
    }

    function setAuthed(id) {
      const exp = Date.now() + AUTH_TTL_MS;
      localStorage.setItem(AUTH_KEY, JSON.stringify({ id, exp }));
    }

    function showError(on) {
      document.getElementById("err").style.display = on ? "block" : "none";
    }

    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      showError(false);

      const idEl = document.getElementById('id');
      const pwEl = document.getElementById('pw');
      const btn = document.getElementById('btn');

      idEl.value = FIXED_ID;

      const pw = (pwEl.value || "").trim();
      if (!pw) {
        pwEl.focus();
        return;
      }

      btn.disabled = true;
      try {
        const h = await sha256Hex(pw);
        if (h.toLowerCase() !== PW_HASH_HEX.toLowerCase()) {
          showError(true);
          return;
        }

        setAuthed(FIXED_ID);
        location.href = "members.html";
      } finally {
        btn.disabled = false;
      }
    });
  </script>

  <script>
    (function () {
      'use strict';

      /* ===============================
         ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§ Ï∞®Îã®
         =============================== */
      document.addEventListener('keydown', function (e) {
        const key = e.key.toLowerCase();

        // F12
        if (e.key === 'F12') {
          e.preventDefault();
          e.stopPropagation();
          return false;
        }

        // Ctrl Í≥ÑÏó¥
        if (e.ctrlKey) {
          // Ctrl + S, U, P, A, C
          if (['s', 'u', 'p', 'a', 'c'].includes(key)) {
            e.preventDefault();
            e.stopPropagation();
            return false;
          }

          // Ctrl + Shift + I, J, C
          if (e.shiftKey && ['i', 'j', 'c'].includes(key)) {
            e.preventDefault();
            e.stopPropagation();
            return false;
          }
        }
      }, true);
    })();
  </script>

</body>

</html>