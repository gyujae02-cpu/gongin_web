<!doctype html>
<html lang="ko">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Maple Guild Login</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    :root {
      --bg: #ffffff;
      --stroke: rgba(15, 23, 42, .12);
      --shadow: 0 24px 60px rgba(15, 23, 42, .14);
      --shadow-soft: 0 14px 34px rgba(15, 23, 42, .12);

      --radius-xl: 30px;
      --radius: 22px;

      /* Maple-ish Blue */
      --blue1: #4da3ff;
      --blue2: #2f7de1;
      --blue3: #1f5fb8;

      --text: #0f172a;
      --muted: rgba(15, 23, 42, .60);

      --input-bg: #f9fbff;
      --input-stroke: #cfe2ff;

      --badge-bg: #edf4ff;
      --badge-text: #2f7de1;
    }

    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      background: var(--bg);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
      color: var(--text);
      overflow-x: hidden;
    }

    /* safe-area padding */
    .page {
      min-height: 100vh;
      min-height: 100dvh;
      display: grid;
      place-items: center;
      padding:
        calc(24px + env(safe-area-inset-top)) calc(16px + env(safe-area-inset-right)) calc(24px + env(safe-area-inset-bottom)) calc(16px + env(safe-area-inset-left));
    }

    /* ===== Responsive Scene Layout ===== */
    .scene {
      width: min(1100px, 100%);
      display: grid;
      gap: 18px;
      align-items: center;
    }

    /* Desktop grid */
    @media (min-width: 992px) {
      .scene {
        grid-template-columns: 1.7fr 1fr;
        gap: 0;
        position: relative;
        min-height: 640px;
      }
    }

    /* ===== Background Card ===== */
    .bg-card {
      border-radius: var(--radius-xl);
      overflow: hidden;
      box-shadow: var(--shadow);
      border: 1px solid var(--stroke);
      background: #f2f4f7;
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 9;
      min-height: 220px;
      max-height: 520px;
    }

    @media (min-width: 576px) {
      .bg-card {
        min-height: 260px;
      }
    }

    @media (min-width: 992px) {
      .bg-card {
        aspect-ratio: auto;
        height: 520px;
        width: 100%;
      }
    }

    .bg-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      transform: scale(1.01);
    }

    .bg-card::after {
      content: "";
      position: absolute;
      inset: 0;
      background: rgba(255, 255, 255, .12);
      pointer-events: none;
    }

    /* ===== Login Panel ===== */
    .login-panel {
      border-radius: var(--radius-xl);
      background: rgba(255, 255, 255, .92);
      border: 1px solid rgba(15, 23, 42, .10);
      box-shadow: var(--shadow-soft);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);

      padding: clamp(16px, 3vw, 28px);
      width: 100%;
      max-width: 420px;
      margin-inline: auto;
      position: relative;
      z-index: 2;

      /* mobile/tablet overlap */
      margin-top: -22px;
    }

    @media (min-width: 768px) {
      .login-panel {
        margin-top: -28px;
      }
    }

    @media (min-width: 992px) {
      .login-panel {
        max-width: 380px;
        margin-top: 0;
        margin-left: -60px;
        align-self: center;
      }
    }

    /* ===== Badge / Title ===== */
    .guild-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 7px 14px;
      border-radius: 999px;
      background: var(--badge-bg);
      color: var(--badge-text);
      font-size: 13px;
      font-weight: 700;
      margin-bottom: 14px;
      border: 1px solid rgba(47, 125, 225, .20);

      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .title {
      font-size: clamp(20px, 2.2vw, 26px);
      font-weight: 900;
      letter-spacing: -0.02em;
      margin: 0 0 6px 0;
      line-height: 1.15;
      word-break: keep-all;
    }

    .sub {
      margin: 0 0 18px 0;
      color: var(--muted);
      font-size: clamp(13px, 1.6vw, 14px);
      line-height: 1.45;
    }

    /* ===== Inputs ===== */
    .form-control {
      height: 48px;
      border-radius: 14px;
      border: 1px solid var(--input-stroke);
      background: var(--input-bg);
      box-shadow: 0 1px 0 rgba(15, 23, 42, .04) inset;
      padding: 12px 14px;
      font-size: 15px;
    }

    .form-control:focus {
      border-color: rgba(77, 163, 255, .70);
      box-shadow: 0 0 0 .25rem rgba(77, 163, 255, .22);
      background: #fff;
    }

    /* iOS zoom Î∞©ÏßÄ */
    input,
    button {
      font-size: 16px;
    }

    /* ===== Button ===== */
    .btn-login {
      height: 48px;
      border-radius: 14px;
      font-weight: 800;
      border: none;
      background: linear-gradient(180deg, var(--blue1), var(--blue2));
      box-shadow: 0 8px 0 var(--blue3), 0 18px 32px rgba(47, 125, 225, .18);
      transition: transform .08s ease, box-shadow .08s ease, filter .12s ease;
      -webkit-tap-highlight-color: transparent;
    }

    .btn-login:hover {
      filter: brightness(.98);
      transform: translateY(-1px);
    }

    .btn-login:active {
      transform: translateY(2px);
      box-shadow: 0 6px 0 var(--blue3), 0 14px 28px rgba(47, 125, 225, .16);
    }

    .btn-login:disabled {
      opacity: .8;
      transform: none !important;
      box-shadow: 0 8px 0 var(--blue3), 0 18px 32px rgba(47, 125, 225, .12);
    }

    /* ===== Footer line ===== */
    .help-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 14px;
      font-size: 13px;
      color: rgba(15, 23, 42, .55);
      gap: 10px;
      flex-wrap: wrap;
    }

    .help-row span {
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .error-text {
      display: none;
      margin-top: 10px;
      font-size: 13px;
      color: #dc2626;
      font-weight: 700;
      line-height: 1.35;
    }

    /* ===== Ultra Small (<= 360px) ===== */
    @media (max-width: 360px) {
      .page {
        padding:
          calc(18px + env(safe-area-inset-top)) calc(12px + env(safe-area-inset-right)) calc(18px + env(safe-area-inset-bottom)) calc(12px + env(safe-area-inset-left));
      }

      .bg-card {
        min-height: 200px;
        border-radius: 22px;
      }

      .login-panel {
        border-radius: 24px;
        margin-top: -18px;
        padding: 14px;
        max-width: 100%;
      }

      .guild-badge {
        font-size: 12px;
        padding: 6px 12px;
        margin-bottom: 10px;
      }

      .title {
        font-size: 18px;
        line-height: 1.18;
      }

      .sub {
        font-size: 12.5px;
        margin-bottom: 14px;
      }

      .form-control {
        height: 44px;
        border-radius: 12px;
        padding: 10px 12px;
        font-size: 14px;
      }

      .btn-login {
        height: 44px;
        border-radius: 12px;
        box-shadow: 0 7px 0 var(--blue3), 0 14px 24px rgba(47, 125, 225, .16);
      }

      .help-row {
        margin-top: 12px;
        font-size: 12px;
      }
    }

    /* ===== Ultra Ultra Small (<= 320px) ===== */
    @media (max-width: 320px) {
      .bg-card {
        min-height: 190px;
      }

      .login-panel {
        padding: 12px;
        margin-top: -16px;
      }

      .guild-badge {
        font-size: 11.5px;
        padding: 6px 10px;
      }

      .title {
        font-size: 17px;
        letter-spacing: -0.03em;
      }

      .sub {
        font-size: 12px;
        margin-bottom: 12px;
      }

      .help-row {
        font-size: 11.5px;
        gap: 6px;
      }

      .help-row span {
        white-space: normal;
        line-height: 1.3;
      }

      .error-text {
        font-size: 12px;
      }
    }

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
        scroll-behavior: auto !important;
      }
    }
  </style>
</head>

<body>
  <div class="page">
    <div class="scene">

      <div class="bg-card" aria-hidden="true">
        <img src="assets/bg.jpg" alt="Background" />
      </div>

      <div class="login-panel">
        <div class="guild-badge">üçÅ Î©îÏù¥ÌîåÌÇ§Ïö∞Í∏∞ 16ÏÑúÎ≤Ñ</div>

        <div class="title">Í≥µÏù∏ Í∏∏Îìú Í¥ÄÎ¶¨ ÏãúÏä§ÌÖú</div>
        <p class="sub">ÌóàÍ∞ÄÎêú ÏÇ¨Ïö©ÏûêÎßå Ï†ëÍ∑ºÌï† Ïàò ÏûàÏäµÎãàÎã§.</p>

        <form id="loginForm" novalidate>
          <div class="mb-3">
            <input id="id" class="form-control" type="text" value="admin" readonly>
          </div>

          <div class="mb-2">
            <input id="pw" class="form-control" type="password" placeholder="Password" autocomplete="current-password"
              inputmode="text" required>
          </div>

          <div id="err" class="error-text">ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.</div>

          <button id="btn" class="btn btn-login w-100 mt-3" type="submit">Î°úÍ∑∏Ïù∏</button>

          <div class="help-row">
            <span>¬© 2025 Î©îÏù¥ÌîåÌÇ§Ïö∞Í∏∞ Í≥µÏù∏ Í∏∏Îìú</span>
          </div>
        </form>
      </div>

    </div>
  </div>

  <script>
    const AUTH_KEY = "guild_auth_v1";
    const AUTH_TTL_MS = 1000 * 60 * 60 * 12; // 12ÏãúÍ∞Ñ
    const FIXED_ID = "admin";

    const PW_HASH_HEX = "77f1694a883c6a104c93b6f8643d9e2379041b6c231e722134a6868255a19e19";

    (function autoRedirectIfAuthed() {
      try {
        const raw = localStorage.getItem(AUTH_KEY);
        if (!raw) return;
        const data = JSON.parse(raw);
        if (!data || !data.exp || Date.now() > data.exp) return;
        location.replace("members.html");
      } catch (e) { }
    })();

    async function sha256Hex(str) {
      const enc = new TextEncoder().encode(str);
      const buf = await crypto.subtle.digest("SHA-256", enc);
      const arr = Array.from(new Uint8Array(buf));
      return arr.map(b => b.toString(16).padStart(2, "0")).join("");
    }

    function setAuthed(id) {
      const exp = Date.now() + AUTH_TTL_MS;
      localStorage.setItem(AUTH_KEY, JSON.stringify({ id, exp }));
    }

    function showError(on) {
      document.getElementById("err").style.display = on ? "block" : "none";
    }

    document.getElementById('loginForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      showError(false);

      const idEl = document.getElementById('id');
      const pwEl = document.getElementById('pw');
      const btn = document.getElementById('btn');

      idEl.value = FIXED_ID;

      const pw = (pwEl.value || "").trim();
      if (!pw) {
        pwEl.focus();
        return;
      }

      btn.disabled = true;
      try {
        const h = await sha256Hex(pw);
        if (h.toLowerCase() !== PW_HASH_HEX.toLowerCase()) {
          showError(true);
          return;
        }

        setAuthed(FIXED_ID);
        location.href = "members.html";
      } finally {
        btn.disabled = false;
      }
    });
  </script>

  <script>
    (function () {
      'use strict';

      /* ===============================
         ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§ Ï∞®Îã®
         =============================== */
      document.addEventListener('keydown', function (e) {
        const key = (e.key || "").toLowerCase();

        // F12
        if (e.key === 'F12') {
          e.preventDefault();
          e.stopPropagation();
          return false;
        }

        // Ctrl Í≥ÑÏó¥
        if (e.ctrlKey) {
          // Ctrl + S, U, P, A, C
          if (['s', 'u', 'p', 'a', 'c'].includes(key)) {
            e.preventDefault();
            e.stopPropagation();
            return false;
          }

          // Ctrl + Shift + I, J, C
          if (e.shiftKey && ['i', 'j', 'c'].includes(key)) {
            e.preventDefault();
            e.stopPropagation();
            return false;
          }
        }
      }, true);
    })();
  </script>

</body>

</html>